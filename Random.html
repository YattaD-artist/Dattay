<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tiêu Chuẩn</title>
<link href="https://fonts.googleapis.com/css2?family=Saira:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
* { box-sizing: border-box; }
html, body { max-width: 100%; overflow-x: hidden; }
body {
    margin: 0;
    font-family: 'Saira', sans-serif;
    background-color: #ede9eb;
    color: #1a2129;
    overflow: hidden;
    --bg: #ede9eb;
    --text: #1a2129;
    --accent: #e32630;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s;
}
body.dark {
    --bg: #1b1b1b;
    --text: #f5f5f5;
    --accent: #1cd9cf;
}

header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 24px;
    border-bottom: 1px solid #ccc;
    background-color: var(--bg);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
}

.center-title {
    flex: 1;
    text-align: center;
    font-weight: 800;
    font-size: 2.5rem;
    letter-spacing: 1px;
    color: var(--accent);
}

.left, .right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.3rem;
    color: var(--text);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    transition: transform 0.25s ease, color 0.25s ease, background-color 0.25s ease;
}
.icon-btn:hover { transform: scale(1.15); color: var(--accent); background-color: rgba(0,0,0,0.05); }

.top-menu {
    display: flex;
    gap: 10px;
    align-items: center;
}
.top-menu a,
.top-menu button {
    font-weight: 700;
    font-size: 0.95rem;
    padding: 8px 10px;
    border-radius: 10px;
    border: 1px solid transparent;
    text-decoration: none;
    background: transparent;
    color: var(--text);
    cursor: pointer;
    transition: all 0.18s ease;
}
.top-menu a:hover,
.top-menu button:hover {
    background-color: var(--accent);
    color: var(--bg);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.12);
}

main {
    display: flex;
    flex: 1;
    min-height: calc(100vh - 70px);
    gap: 30px;
    padding: 30px;
}

.left-canvas {
    flex: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.right-content {
    flex: 1;
}

textarea { width: 100%; height: 200px; margin-bottom: 10px; }
#spinButton, .repeat-btn, .speed-btn { padding: 8px 12px; margin: 3px; cursor: pointer; }

.modal, .image-modal { display: none; position: fixed; z-index: 200; left:0; top:0; width:100%; height:100%; background-color: rgba(0,0,0,0.6); justify-content:center; align-items:center; }
.modal-content { background-color: var(--bg); padding:20px; border-radius:12px; max-width:400px; width:90%; text-align:center; color: var(--text); }
.close-btn { margin-top:15px; padding:8px 16px; cursor:pointer; background-color: var(--accent); border:none; color: var(--bg); border-radius:6px; }

.menu { display:flex; flex-direction: column; gap:10px; }
.menu a { padding:10px; background: var(--bg); border:2px solid var(--text); border-radius:12px; text-align:center; text-decoration:none; color:var(--text);}
.menu a:hover { background-color: var(--accent); color: var(--bg); transform: translateY(-2px); }

@media(max-width:768px) {
    main { flex-direction: column; padding:10px; gap:10px; }
}
</style>
</head>
<body>

<header>
    <div class="left">
       <a href="index.html" class="icon-btn" title="Trang chủ">
  <i class="fa-solid fa-house"></i>
</a>
        <button class="icon-btn" id="lang-toggle" title="Đổi ngôn ngữ"><i class="fa-solid fa-language"></i></button>
    </div>
    <div class="center-title">Tiêu Chọn</div>
    <div class="right top-menu">
        <button class="menu-btn" data-type="mega">Vietlott Mega</button>
        <button class="menu-btn" data-type="power">Vietlott Power</button>
        <button class="menu-btn" data-type="abcd">ABCD</button>
    </div>
</header>

<main>
    <div class="left-canvas">
        <canvas id="wheelCanvas" width="400" height="400"></canvas>
    </div>
    <div class="right-content">
        <h2>Nhập danh sách tên:</h2>
        <textarea id="inputNames">Tiêu
Mà
Chọn
Thì
Chỉ
Có
Chuẩn</textarea>
        <div>
            <label>Số lần lặp danh sách:</label>
            <div id="repeatButtons">
        <button data-repeat="1" class="repeat-btn active">1</button>
        <button data-repeat="2" class="repeat-btn">2</button>
        <button data-repeat="3" class="repeat-btn">3</button>
        <button data-repeat="4" class="repeat-btn">4</button>
        <button data-repeat="5" class="repeat-btn">5</button>
            </div>
            <label>Thời gian suy nghĩ:</label>
            <div id="speedButtons">
        <button data-speed="1" class="speed-btn active">1</button>
        <button data-speed="10" class="speed-btn">2</button>
        <button data-speed="10" class="speed-btn">3</button>
        <button data-speed="10" class="speed-btn">4</button>
        <button data-speed="10" class="speed-btn">5</button>
        <button data-speed="10" class="speed-btn">6</button>
        <button data-speed="10" class="speed-btn">7</button>
        <button data-speed="10" class="speed-btn">8</button>
        <button data-speed="10" class="speed-btn">9</button>
        <button data-speed="10" class="speed-btn">10</button>
            </div>
        </div>
        <button id="spinButton">BẮT ĐẦU!</button>
    </div>
</main>

<!-- Modal Vòng quay -->
<div id="resultModal" class="modal">
    <div class="modal-content">
        <h2 id="resultText">...</h2>
        <p>Hãy tự tin với kết quả này nhé!</p>
        <button class="close-btn" id="closeResult">Đóng</button>
    </div>
</div>

<!-- Modal Vietlott -->
<div id="vietlottModal" class="modal">
    <div class="modal-content">
        <h2>Kết quả Vietlott</h2>
        <div id="vietlottNumbers"></div>
        <button class="close-btn" id="closeVietlott">Đóng</button>
    </div>
</div>

<!-- Modal ABCD -->
<div id="abcdModal" class="modal">
    <div class="modal-content">
        <h2>Nhập số câu hỏi (1-50)</h2>
        <input type="number" id="questionCount" min="1" max="50">
        <button id="startAbcd">Bắt đầu</button>
        <div id="abcdResult"></div>
        <button class="close-btn" id="closeAbcd">Đóng</button>
    </div>
</div>

<script>
// Toggle language (ví dụ)
const langBtn = document.getElementById('lang-toggle');
langBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark');
});

// Show/Hide modals
const resultModal = document.getElementById('resultModal');
const vietlottModal = document.getElementById('vietlottModal');
const abcdModal = document.getElementById('abcdModal');

document.querySelectorAll('.menu-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
        if(btn.dataset.type==='mega' || btn.dataset.type==='power'){
            vietlottModal.style.display='flex';
            generateVietlott(btn.dataset.type);
        } else if(btn.dataset.type==='abcd'){
            abcdModal.style.display='flex';
        }
    });
});

document.getElementById('closeResult').onclick = ()=> resultModal.style.display='none';
document.getElementById('closeVietlott').onclick = ()=> vietlottModal.style.display='none';
document.getElementById('closeAbcd').onclick = ()=> abcdModal.style.display='none';

// Vòng quay
const wheelCanvas = document.getElementById('wheelCanvas');
const ctx = wheelCanvas.getContext('2d');
let names = document.getElementById('inputNames').value.split('\n').filter(n=>n.trim()!=='');
let angle = 0;

function drawWheel() {
    const n = names.length;
    const radius = 180;
    ctx.clearRect(0,0,400,400);
    for(let i=0;i<n;i++){
        const start = (2*Math.PI/n)*i;
        const end = start + 2*Math.PI/n;
        ctx.beginPath();
        ctx.moveTo(200,200);
        ctx.arc(200,200,radius,start,end);
        ctx.fillStyle = i%2===0?'#fdd':'#dfd';
        ctx.fill();
        ctx.save();
        ctx.translate(200,200);
        ctx.rotate(start + (end-start)/2);
        ctx.fillStyle = '#000';
        ctx.textAlign='right';
        ctx.font='14px Arial';
        ctx.fillText(names[i], radius-10,5);
        ctx.restore();
    }
}
drawWheel();

document.getElementById('spinButton').onclick = ()=>{
    names = document.getElementById('inputNames').value.split('\n').filter(n=>n.trim()!=='');
    if(names.length===0) return alert('Nhập ít nhất 1 tên');
    let speed = 0.3 + Math.random()*0.5;
    let spins = 200 + Math.random()*200;
    let currentSpin=0;
    const anim = setInterval(()=>{
        angle += speed;
        currentSpin++;
        drawWheel();
        ctx.save();
        ctx.translate(200,200);
        ctx.rotate(angle);
        ctx.restore();
        if(currentSpin>spins){
            clearInterval(anim);
            const idx = Math.floor(names.length - (angle/(2*Math.PI)*names.length)%names.length);
            document.getElementById('resultText').innerText = names[idx % names.length];
            resultModal.style.display='flex';
        }
    }, 10);
};

// Vietlott generator
function generateVietlott(type){
    let count = type==='mega'?6:5;
    let max = type==='mega'?45:55;
    let numbers = [];
    while(numbers.length<count){
        let n = Math.floor(Math.random()*max)+1;
        if(!numbers.includes(n)) numbers.push(n);
    }
    document.getElementById('vietlottNumbers').innerText = numbers.join(' - ');
}

// ABCD generator
document.getElementById('startAbcd').onclick = ()=>{
    const cnt = parseInt(document.getElementById('questionCount').value)||1;
    const arr = [];
    for(let i=0;i<cnt;i++){
        const choices = ['A','B','C','D'];
        arr.push(choices[Math.floor(Math.random()*4)]);
    }
    document.getElementById('abcdResult').innerText = arr.join(' ');
}
</script>

</body>
</html>
