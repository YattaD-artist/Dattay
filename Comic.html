<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>YattaD</title>
<link href="https://fonts.googleapis.com/css2?family=Saira:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
* {
    box-sizing: border-box;
}

html, body {
    max-width: 100%;
    overflow-x: hidden; /* Chặn cuộn ngang */
}

body {
    height: 100%;
    margin: 0;
    font-family: 'Saira', sans-serif;
    background-color: var(--bg);
    color: var(--text);
    overflow: hidden;
    --bg: #ede9eb;
    --text: #1a2129;
    --accent: #e32630;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s, box-shadow 0.3s;
}
body.dark {
    --bg: #1b1b1b;
    --text: #f5f5f5;
    --accent: #1cd9cf;
}

header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 24px;
    border-bottom: 1px solid #ccc;
    background-color: var(--bg);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
}

.center-title {
    flex: 1;
    text-align: center;
    font-weight: 800;
    font-size: 2.5rem;
    letter-spacing: 1px;
    color: var(--accent);
}

.left, .right {
    display: flex;
    align-items: center;
    gap: 16px;
}

.icon-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.3rem;
    color: var(--text);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    transition: transform 0.25s ease, color 0.25s ease, background-color 0.25s ease;
}
.icon-btn:hover {
    transform: scale(1.15);
    color: var(--accent);
    background-color: rgba(0,0,0,0.05);
}

a {
    text-decoration: none;
}

a:hover,
a:focus {
    text-decoration: none;
}

main {
    display: flex;
    flex: 1;
    min-height: calc(100vh - 70px);
    gap: 30px;
    padding: 30px;
}

.info {
    flex: 2;
    padding: 32px;
    background-color: var(--bg);
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,0.1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    overflow-y: auto;
    transition: background-color 0.3s, box-shadow 0.3s, border-color 0.3s;
}
.info h2 {
    font-size: 2rem;
    margin-bottom: 16px;
    font-weight: 700;
    color: var(--accent);
    border-bottom: 3px solid var(--accent);
    display: inline-block;
    padding-bottom: 5px;
}
.info h3 {
    font-size: 1.15rem;
    margin: 10px 0;
    line-height: 1.5;
}
.info strong {
    font-weight: 700;
    color: var(--accent);
}

.menu {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 18px;
    margin-top: 48px;
    animation: slideIn 0.6s ease-out forwards;
    opacity: 0;
    min-height: auto;
}
.menu a {
    display: block;
    padding: 14px;
    text-align: center;
    font-weight: 700;
    font-size: 1.2rem;
    text-decoration: none;
    color: var(--text);
    background-color: var(--bg);
    border: 2px solid var(--text);
    border-radius: 12px;
    transition: all 0.25s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
.menu a:hover {
    background-color: var(--accent);
    color: var(--bg);
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

@keyframes slideIn {
    from {
        transform: translateX(40px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.modal {
    display: none;
    position: fixed;
    z-index: 200;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background-color: rgba(53, 63, 69, 0.7);
    justify-content: center;
    align-items: center;
}
.modal-content {
    background-color: var(--bg);
    padding: 15px;
    border-radius: 12px;
    max-width: 380px;   /* Giới hạn chiều rộng tối đa nhỏ hơn */
    max-height: 50vh;
    width: 90%;
    text-align: center;
    color: var(--text);
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    transition: background-color 0.3s, color 0.3s;
}

.qr-list {
    display: flex;
    gap: 20px;
    flex-wrap: nowrap;
    justify-content: center;
}
.qr-item img {
    width: 150px;
    border: 2px solid var(--text);
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.qr-item img:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 15px rgba(0,0,0,0.25);
}

.close-btn {
    margin-top: 20px;
    padding: 10px 20px;
    border: none;
    background-color: var(--accent);
    color: var(--bg);
    cursor: pointer;
    font-weight: bold;
    border-radius: 6px;
    transition: background-color 0.25s ease, transform 0.25s ease;
}
.close-btn:hover {
    transform: translateY(-1px);
    background-color: #14b0ab;
}

.image-modal {
    display: none;
    position: fixed;
    z-index: 300;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(53, 63, 69, 0.8);
    justify-content: center;
    align-items: center;
}
.image-modal img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(53, 63, 69, 0.5);
}

/* MOBILE */
/* Phiên bản Mobile */
/* Mobile Layout */
/* Mobile Layout */
/* Mobile Layout */
@media (max-width: 768px) {
    body {
        overflow: auto;
        padding-bottom: 60px; /* chừa chỗ cho menu cố định */
    }

    /* Header giữ chữ ở giữa, icon hai bên */
    header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
    }

    .center-title {
        font-size: 1.6rem;
        text-align: center;
        flex: 1;
    }

    .left, .right {
        flex-direction: row;
        gap: 8px;
    }

.floating-controls {
        display: flex;
        flex-direction: row; /* Xếp ngang */
        gap: 8px;            /* Khoảng cách giữa 2 nút */
        margin-bottom: 10px; /* Cách phần nội dung dưới */
    }

    /* Info chiếm toàn bộ chiều ngang */
    main {
        flex-direction: column;
        padding: 10px;
        gap: 10px;
    }

    .info {
        width: 100%;
        padding: 16px;
        padding-bottom: 32px;
    }

    /* Menu ngang luôn hiển thị ở đáy */
     @media (max-width: 768px) {
    .menu {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        flex-direction: row;
        justify-content: space-around;
        background-color: var(--bg);
        padding: 6px 4px; /* Giảm padding ngang */
        gap: 4px;
        border-top: 1px solid #ccc;
        box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
        z-index: 200;
    }

    .menu a {
        flex: 1;
        padding: 8px 4px;
        font-size: 0.95rem;
        white-space: normal; /* Cho phép xuống hàng */
        line-height: 1.2;
        text-align: center;
        word-break: break-word;
    }
}

}

    /* Popup full màn hình */
    .modal-content {
        width: 95%;
        max-width: none;
        height: 100%;
        overflow-y: auto;
        padding-top: 0px;
    }

    .qr-item img {
        width: 100px;
    }

}

</style>
</head>
<body>
<header>
    <div class="left">
          <div class="left">
       <a href="index.html" class="icon-btn" title="Trang chủ">
  <i class="fa-solid fa-house"></i>
</a>
        <button class="icon-btn" id="theme-toggle" title="Đổi chế đố"><i class="fas fa-adjust"></i></button>
        <button class="icon-btn" id="lang-toggle" title="Đổi ngôn ngữ"><i class="fa-solid fa-language"></i></button>
    </div>
    <div class="center-title" data-lang="title">Truyện Tranh</div>
</header>

<main>
    <div class="info">
        <h2 data-lang="infoTitle">Lời Nói Đầu</h2>
   
    </div>
    <div class="menu">
    <a href="" data-lang="comic1">PunkgaMerch</a>
    <a href="" data-lang="comic2">Red&Ruby</a>
    <a href="" data-lang="comic3">Tiêu&Tùng</a>
    <a id="" data-lang="comic4">Khai&Phá</a>
    <a href="" data-lang="comic5">Sao Băng Mùa Hạ</a>
</div>

    <div id="overlay" class="modal" style="display:none;">
  <div style="position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;">
    <div id="deck" style="position:relative;width:100%;max-width:460px;height:75vh;overflow:hidden;display:flex;align-items:center;justify-content:center;"></div>
    <div style="margin-top:12px;">
      <span id="caption" style="font-weight:bold;"></span>
    </div>
    <button id="closeBtn" class="close-btn" style="margin-top:18px;">Đóng</button>
    <button id="restartBtn" class="close-btn" style="display:none;margin-top:8px;">Xem lại</button>
  </div>
</div>
    
</main>

<script>
    const translations = {
        vi: {
            title: "Lời Nói Đầu",
          
            comic1: "Bộ Áo Mới Của Nhà Vua",
            comic2: "Red và Ruby",
            comic3: "Tiêu Tùng",
            comic4: "Khai Phá",
            comic5: "Sao Băng Mùa Hạ",

            closeBtn: "Đóng"
        },
        en: {
            title: "Foreword",
          
            comic1: "PunkGa&shy;Merch",
            comic2: "Red&shy;&&shy;Ruby",
            comic3: "Tieu&shy;Tung",
            comic4: "Break&shy;th&shy;Rough",
            comic5: "Summershy;Shootshy;tingshy;Star",

            closeBtn: "Close"
        }
    };

    let currentLang = localStorage.getItem("lang") || "vi";
    let darkMode = localStorage.getItem("theme") === "dark";

    function applyLanguage() {
        document.querySelectorAll("[data-lang]").forEach(el => {
            const key = el.getAttribute("data-lang");
            if (translations[currentLang][key]) {
                el.innerHTML = translations[currentLang][key];
            }
        });
        localStorage.setItem("lang", currentLang);
    }

    function applyTheme() {
        document.body.classList.toggle("dark", darkMode);
        localStorage.setItem("theme", darkMode ? "dark" : "light");
    }

    document.getElementById("lang-toggle").addEventListener("click", () => {
        currentLang = currentLang === "vi" ? "en" : "vi";
        applyLanguage();
    });

    document.getElementById('theme-toggle').addEventListener('click', () => {
        darkMode = !darkMode;
        applyTheme();
    });
});

imageModal.addEventListener('click', () => {
    imageModal.style.display = 'none';
    largeImage.src = '';
});

    // Áp dụng khi load trang
    applyTheme();
    applyLanguage();
    
//TRUYÊN TRANH
//TRUYÊN TRANH    
//TRUYÊN TRANH
const galleryConfig = {
  punkga: { 
    total: 15,
    folder: "PunkgaMerch",
    captions: (i) => i === 0 ? 'Trang Bìa' : `Trang ${i}`,
  },
  redruby: { 
    total: 18, 
    folder: "RedRuby",
    captions: (i) => i === 0 ? 'Trang Bìa' : `Trang ${i}`,
  },
  tieutung: {
    total: 14,
    folder: "TieuTung",
    captions: (i) => i === 0 ? 'Trang Bìa' : `Trang ${i}`,
  },
  khaipha: {
    total: 12,
    folder: "KhaiPha",
    captions: (i) => i === 0 ? 'Trang Bìa' : `Trang ${i}`,
  },
  saobang: {
    total: 12,
    folder: "SaoBangMuaHa",
    captions: (i) => i === 0 ? 'Trang Bìa' : `Trang ${i}`,
  }
};

function setupGallery(triggerId, configKey) {
  const overlay = document.getElementById('overlay');
  const deck = document.getElementById('deck');
  const caption = document.getElementById('caption');
  const closeBtn = document.getElementById('closeBtn');
  const restartBtn = document.getElementById('restartBtn');
  const { total, folder, captions } = galleryConfig[configKey];
  const sounds = Array.from({ length: 4 }, (_, i) => `assets/sfx/Pictures/Paper${i + 1}.mp3`);

  let images = [];
  let index = 0;
  let transitioning = false;
  let touchStartX = 0;

  function clearGallery() {
    deck.innerHTML = '';
    images = [];
  }

  function loadImages() {
    clearGallery();
    for (let i = 0; i < total; i++) {
      const img = document.createElement('img');
      img.src = `comics/${folder}/${String(i).padStart(2, '0')}.webp`;
      img.style.position = 'absolute';
      img.style.top = 0;
      img.style.left = 0;
      img.style.width = '100%';
      img.style.height = '100%';
      img.style.objectFit = 'contain';
      img.style.transition = 'opacity 0.25s, transform 0.5s';
      img.style.opacity = 0;
      img.style.pointerEvents = 'none';
      if (i > 2) img.loading = 'lazy';
      deck.appendChild(img);
      images.push(img);

      img.addEventListener('transitionend', () => {
        if (img.classList.contains('active')) transitioning = false;
      });
    }
  }

  function update() {
    images.forEach((img, i) => {
      img.className = '';
      img.style.zIndex = '';
      img.style.opacity = (i === index) ? 1 : 0;
      img.style.transform = '';
      if (i === index) {
        img.classList.add('active');
        img.style.zIndex = '30';
        img.style.pointerEvents = 'auto';
        img.style.transform = 'scale(1)';
      } else if (i < index) {
        img.classList.add('left');
        img.style.zIndex = String(5 + i);
        img.style.transform = 'translateX(-35%) scale(0.95)';
      } else {
        img.classList.add('right');
        img.style.zIndex = String(5 - (i - index));
        img.style.transform = 'translateX(35%) scale(0.95)';
      }
    });
    caption.textContent = captions(index);
    restartBtn.style.display = index === total - 1 ? 'block' : 'none';
  }

  function playSound() {
    const audio = new Audio(sounds[Math.floor(Math.random() * sounds.length)]);
    audio.playbackRate = 1.5;
    audio.play().catch(() => {});
  }

  function show() {
    index = 0;
    transitioning = false;
    overlay.style.display = 'flex';
    loadImages();
    update();
  }

  function hide() {
    overlay.style.display = 'none';
    transitioning = false;
  }

  function next() {
    if (!transitioning && index < total - 1) {
      playSound();
      transitioning = true;
      index++;
      update();
    }
  }

  function prev() {
    if (!transitioning && index > 0) {
      playSound();
      transitioning = true;
      index--;
      update();
    }
  }

  function restart() {
    if (!transitioning) {
      index = 0;
      update();
    }
  }

  // Sự kiện
  document.getElementById(triggerId).addEventListener('click', function(e){
    e.preventDefault();
    show();
  });
  closeBtn.onclick = hide;
  restartBtn.onclick = restart;
  overlay.onclick = function(e) {
    const rect = overlay.getBoundingClientRect();
    if (e.target === overlay) {
      // Chỉ khi click vào overlay, không phải con
      hide();
    } else if (e.clientX > rect.left + rect.width / 2 + 50) next();
    else if (e.clientX < rect.left + rect.width / 2 - 50) prev();
  };
  overlay.addEventListener('touchstart', (e) => {
    touchStartX = e.touches[0].clientX;
  });
  overlay.addEventListener('touchend', (e) => {
    const diff = e.changedTouches[0].clientX - touchStartX;
    if (Math.abs(diff) > 50) {
      diff < 0 ? next() : prev();
    }
  });
  window.addEventListener('keydown', (e) => {
    if (overlay.style.display === 'flex' && !transitioning) {
      if (e.key === 'ArrowRight') next();
      if (e.key === 'ArrowLeft') prev();
      if (e.key === 'Escape') hide();
    }
  });
}

// Áp dụng cho các menu
setupGallery('punkga-link', 'punkga');
setupGallery('redruby-link', 'redruby');
setupGallery('tieutung-link', 'tieutung');
setupGallery('khaipha-link', 'khaipha');
setupGallery('saobang-link', 'saobang');

</script>
</body>
</html>
